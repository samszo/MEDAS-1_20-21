-- MySQL Script generated by MySQL Workbench
-- Tue May  4 12:34:40 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema DB_exam_21
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema DB_exam_21
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `DB_exam_21` DEFAULT CHARACTER SET utf8 ;
USE `DB_exam_21` ;

-- -----------------------------------------------------
-- Table `DB_exam_21`.`personne`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB_exam_21`.`personne` (
  `numSS` INT(13) NOT NULL,
  `nom` VARCHAR(45) NOT NULL,
  `prenom` VARCHAR(45) NOT NULL,
  `dateNaiss` VARCHAR(10) NOT NULL,
  `nbComorbidites` INT NOT NULL,
  PRIMARY KEY (`numSS`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_exam_21`.`laboratoire`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB_exam_21`.`laboratoire` (
  `idlaboratoire` INT NOT NULL,
  `nom` VARCHAR(45) NOT NULL,
  `adresse` VARCHAR(45) NOT NULL,
  `ville` VARCHAR(45) NOT NULL,
  `codePostal` INT(5) NOT NULL,
  `departement` INT(2) NOT NULL,
  `capacitéAccueil` INT NOT NULL,
  PRIMARY KEY (`idlaboratoire`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_exam_21`.`rendezVous`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB_exam_21`.`rendezVous` (
  `idRendezVous` INT NOT NULL,
  `dateJour` VARCHAR(10) NOT NULL,
  `heure` VARCHAR(5) NOT NULL,
  `typeTest` VARCHAR(45) NOT NULL,
  `laboratoire_idlaboratoire` INT NOT NULL,
  `Personne_numSS` INT NOT NULL,
  PRIMARY KEY (`idRendezVous`),
  INDEX `fk_RendezVous_laboratoire_idx` (`laboratoire_idlaboratoire` ASC),
  INDEX `fk_RendezVous_Personne1_idx` (`Personne_numSS` ASC),
  CONSTRAINT `fk_RendezVous_laboratoire`
    FOREIGN KEY (`laboratoire_idlaboratoire`)
    REFERENCES `DB_exam_21`.`laboratoire` (`idlaboratoire`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_RendezVous_Personne1`
    FOREIGN KEY (`Personne_numSS`)
    REFERENCES `DB_exam_21`.`personne` (`numSS`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_exam_21`.`nombreTestDispoJournaliers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB_exam_21`.`nombreTestDispoJournaliers` (
  `dateJour` VARCHAR(10) NOT NULL,
  `nbTotal` INT NOT NULL,
  `nbPCR` INT NOT NULL,
  `nbAntigenique` INT NOT NULL,
  `nbSerologique` INT NOT NULL,
  `laboratoire_idlaboratoire` INT NOT NULL,
  `ID` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`laboratoire_idlaboratoire`, `ID`),
  INDEX `fk_nombreTestJournaliers_laboratoire1_idx` (`laboratoire_idlaboratoire` ASC),
  CONSTRAINT `fk_nombreTestJournaliers_laboratoire1`
    FOREIGN KEY (`laboratoire_idlaboratoire`)
    REFERENCES `DB_exam_21`.`laboratoire` (`idlaboratoire`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DB_exam_21`.`testsEffectuesJournaliers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DB_exam_21`.`testsEffectuesJournaliers` (
  `dateJour` VARCHAR(10) NOT NULL,
  `nbTotal` INT NOT NULL,
  `nbPCR` VARCHAR(45) NOT NULL,
  `nbAntigenique` VARCHAR(45) NOT NULL,
  `nbSerologique` VARCHAR(45) NOT NULL,
  `laboratoire_idlaboratoire` INT NOT NULL,
  `ID` INT NOT NULL,
  PRIMARY KEY (`laboratoire_idlaboratoire`, `ID`),
  INDEX `fk_testsEffectuesJournaliers_laboratoire1_idx` (`laboratoire_idlaboratoire` ASC),
  CONSTRAINT `fk_testsEffectuesJournaliers_laboratoire1`
    FOREIGN KEY (`laboratoire_idlaboratoire`)
    REFERENCES `DB_exam_21`.`laboratoire` (`idlaboratoire`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `DB_exam_21`.`personne`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB_exam_21`;
INSERT INTO `DB_exam_21`.`personne` (`numSS`, `nom`, `prenom`, `dateNaiss`, `nbComorbidites`) VALUES (1567778778, 'Gérardo', 'Nicole', '01/02/1956', 0);
INSERT INTO `DB_exam_21`.`personne` (`numSS`, `nom`, `prenom`, `dateNaiss`, `nbComorbidites`) VALUES (1445638472, 'Benomin', 'Mouloud', '04/02/1944', 0);
INSERT INTO `DB_exam_21`.`personne` (`numSS`, `nom`, `prenom`, `dateNaiss`, `nbComorbidites`) VALUES (1990363352, 'Duchoux', 'Kevin', '03/03/1999', 0);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB_exam_21`.`laboratoire`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB_exam_21`;
INSERT INTO `DB_exam_21`.`laboratoire` (`idlaboratoire`, `nom`, `adresse`, `ville`, `codePostal`, `departement`, `capacitéAccueil`) VALUES (12432, 'Laboratoire d\'analyses médicales Saint Titi', '20 rue Saint Titi', 'Cartoonville', 56783, 56, 2232);
INSERT INTO `DB_exam_21`.`laboratoire` (`idlaboratoire`, `nom`, `adresse`, `ville`, `codePostal`, `departement`, `capacitéAccueil`) VALUES (12433, 'Laboratoire Grominet', '12 Avenue du Général Leclerc', 'Comicville', 93123, 93, 1222);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB_exam_21`.`rendezVous`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB_exam_21`;
INSERT INTO `DB_exam_21`.`rendezVous` (`idRendezVous`, `dateJour`, `heure`, `typeTest`, `laboratoire_idlaboratoire`, `Personne_numSS`) VALUES (1, '04/05/2021', '13:30', 'PCR', 12432, 1567778778);
INSERT INTO `DB_exam_21`.`rendezVous` (`idRendezVous`, `dateJour`, `heure`, `typeTest`, `laboratoire_idlaboratoire`, `Personne_numSS`) VALUES (3, '04/05/2021', '13:30', 'PCR', 12433, 1445638472);
INSERT INTO `DB_exam_21`.`rendezVous` (`idRendezVous`, `dateJour`, `heure`, `typeTest`, `laboratoire_idlaboratoire`, `Personne_numSS`) VALUES (4, '04/05/2021', '13:30', 'Antigenique', 12433, 1990363352);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB_exam_21`.`nombreTestDispoJournaliers`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB_exam_21`;
INSERT INTO `DB_exam_21`.`nombreTestDispoJournaliers` (`dateJour`, `nbTotal`, `nbPCR`, `nbAntigenique`, `nbSerologique`, `laboratoire_idlaboratoire`, `ID`) VALUES ('04/05/2021', 150, 50, 50, 50, 12432, '1');
INSERT INTO `DB_exam_21`.`nombreTestDispoJournaliers` (`dateJour`, `nbTotal`, `nbPCR`, `nbAntigenique`, `nbSerologique`, `laboratoire_idlaboratoire`, `ID`) VALUES ('04/05/2021', 120, 100, 10, 10, 12433, '2');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DB_exam_21`.`testsEffectuesJournaliers`
-- -----------------------------------------------------
START TRANSACTION;
USE `DB_exam_21`;
INSERT INTO `DB_exam_21`.`testsEffectuesJournaliers` (`dateJour`, `nbTotal`, `nbPCR`, `nbAntigenique`, `nbSerologique`, `laboratoire_idlaboratoire`, `ID`) VALUES ('04/05/2021', 100, '40', '20', '40', 12432, 1);
INSERT INTO `DB_exam_21`.`testsEffectuesJournaliers` (`dateJour`, `nbTotal`, `nbPCR`, `nbAntigenique`, `nbSerologique`, `laboratoire_idlaboratoire`, `ID`) VALUES ('04/05/2021', 100, '100', '0', '0', 12433, 2);

COMMIT;

